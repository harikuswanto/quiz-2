<!DOCTYPE html>
<head>
    <link href='https://fonts.googleapis.com/css?family=DM+Sans' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <title>Request Project Quote</title>
</head>
<body>
    <div id="root" class="container"></div>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" ></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" ></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" ></script>
    <script type="text/babel">
        const root = document.querySelector('#root');
        function App(){
            const [page, setPage] = React.useState(1);
            const [data, setData] =React.useState({
                name:'',
                email:'',
                phone:'',
                company:'',
                service:'Development',
                budget:'$50.000 +'
            });
            const [temp, setTemp] =React.useState({
                name:data.name,
                email:data.email,
                phone:data.phone,
                company:data.company,
                service:data.service,
                budget:data.budget
            });
            const [error, setError] =React.useState({
                name:"",
                email:"",
                phone:"",
                company:"",
            });
            
            const nameRef = React.useRef(null);
            const emailRef = React.useRef(null);
            const phoneRef = React.useRef(null);
            const companyRef = React.useRef(null);
            
            React.useEffect(() => {
                if(error.name.length>0){nameRef.current.focus()} else
                if(error.email.length>0){emailRef.current.focus()} else
                if(error.phone.length>0){phoneRef.current.focus()} else
                if(error.company.length>0){companyRef.current.focus()}
            }, [error]);




            function emailCheck(e) {
                const pattern = /[A-Za-z0-9\.]{6,30}\@gmail\.com$/
                return pattern.test(e);
            };
            
            function phoneCheck(e){
                const pattern = /08[0-9]{6,10}$/ 
                return pattern.test(e);
            };
            
            function isValidContact(e){
                const te = {};
                if(e.name==''){te.name='Name is required'} else {te.name=''};
                if(e.email==''){te.email='Email is required'} else if(emailCheck(e.email)){te.email=''} else {te.email = 'Email is invalid'};
                if(e.phone==''){te.phone='Phone Number is required'} else if(phoneCheck(e.phone)){te.phone=''} else {te.phone = 'Phone Number is invalid'};
                if(e.company==''){te.company='Company is required'} else {te.company=''};
                if(te.name||te.email||te.phone||te.company){te.status=true} else {te.status=false};
                return te;
            }

            function saveData(){
                setError(isValidContact(temp));
                if(isValidContact(temp).status==false){Object.assign(data,temp)}
            }

            function nextButton(){
                saveData();
                if(page>1||isValidContact(temp).status==false){setPage(page+1)};
            }

            function prevButton(){
                saveData();
                if(page>1||isValidContact(temp).status==false){setPage(page-1)};
            }

            function Header(){
                return (
                    <header>
                        <h1>Get a project quote</h1>
                        <p>Please fill the form below to receive a quote for your project. Feel free to add as much detail as needed.</p>
                    </header>
                )
                
            }
            
            function Step(p){
                const [s,d] = ["step","step done"];
                return(
                    <div className={p.d?d:s}>{p.s}</div>
                )
            }
            
            function Bar(p){
                switch(p.k){
                    case '1':
                        return(<div className="bar"><div className="half"></div></div>);
                        break;
                    case '2':
                        return(<div class="bar done"></div>);
                        break;
                    default:
                        return(<div class="bar"></div>);
                    
                }
            }

            function Navbar(x){
                const p=x.page;
                return(
                    <nav>
                        <Step s="1" d />
                        <Bar k={p==1?'1':'2'}/>
                        <Step s="2" d={p<2?'':'1'} />
                        <Bar k={p<2?'':p==2?'1':'2'}/>
                        <Step s="3" d={p<3?'':'1'} />
                        <Bar k={p<3?'':p==3?'1':'2'}/>
                        <Step s="4" d={p<4?'':'1'} />
                    </nav>
                )
            }

            function BoxTitle(x){
                switch(x.page) {
                    case 1:
                        return(
                            <div className="box-title">
                                <h2>Contact details</h2>
                                <p>Lorem ipsum dolor sit amet consectetur adipisc.</p>
                            </div>
                        )
                        break;
                    case 2:
                        return(
                            <div className="box-title">
                                <h2>Our services</h2>
                                <p>Please select which service you are interested in.</p>
                            </div>
                        )
                        // code block
                        break;
                    case 3:
                        return(
                            <div className="box-title">
                                <h2>Whatâ€™s your project budget?</h2>
                                <p>Please select the project budget range you have in mind.</p>
                            </div>
                        )
                        // code block
                        break;
                    case 4:
                        return null
                        break;
                    } 
            }

            function PageSubmit(){
                const notif =JSON.stringify(data);
                function kelar(e){
                    alert(notif);
                }
                return(
                    <div className="box-content last">
                        <div className="icon-complete">
                            <img src="img/CompleteIcon.png" alt="Selesai" />
                        </div>
                        <div className="closing">
                            <h2>Submit your quote request</h2>
                            <p>Please review all the information you previously typed in the past steps, and if all is okay, submit your message to receive a project quote in 24 - 48 hours.</p>
                        </div>
                        <button className="next last" onClick={kelar}>Submit</button>
                    </div>
                )
                
            }

            function PageBudget(){
                function radioChange(e){
                    setTemp((prev) =>{
                        return {...prev, budget: e.target.value}
                    })
                }
                return(
                    <div className="box-content">
                        <input 
                            type="radio" 
                            name="budget" 
                            id="b1" 
                            value="$5.000 - $10.000"
                            checked={temp.budget=="$5.000 - $10.000"?true:false} 
                            onClick={radioChange} 
                        />
                        <label for="b1" class="grup-harga">
                            <div class={temp.budget=="$5.000 - $10.000"?"ceked":"cekbok"}></div>
                            <div class="harga">$5.000 - $10.000</div>    
                        </label>
                        <input 
                            type="radio" 
                            name="budget" 
                            id="b2" 
                            value="$10.000 - $20.000" 
                            checked={temp.budget=="$10.000 - $20.000"?true:false} 
                            onClick={radioChange} 
                        />
                        <label for="b2" class="grup-harga">
                            <div class={temp.budget=="$10.000 - $20.000"?"ceked":"cekbok"}></div>
                            <div class="harga">$10.000 - $20.000</div>    
                        </label>
                        <input 
                            type="radio" 
                            name="budget" 
                            id="b3" 
                            value="$20.000 - $50.000" 
                            checked={temp.budget=="$20.000 - $50.000"?true:false} 
                            onClick={radioChange} 
                        />
                        <label for="b3" class="grup-harga">
                            <div class={temp.budget=="$20.000 - $50.000"?"ceked":"cekbok"}></div>
                            <div class="harga">$20.000 - $50.000</div>    
                        </label>
                        <input 
                            type="radio" 
                            name="budget" 
                            id="b4" 
                            value="$50.000 +" 
                            checked={temp.budget=="$50.000 +"?true:false} 
                            onClick={radioChange} 
                        />
                        <label for="b4" class="grup-harga">
                            <div class={temp.budget=="$50.000 +"?"ceked":"cekbok"}></div>
                            <div class="harga">$50.000 +</div>    
                        </label>
                    </div>
                )
            }

            function PageLayanan(){
                function radioChange(e){
                    setTemp((prev) =>{
                        return {...prev, service: e.target.value}
                    })
                }
                return(
                    <div className="box-content">
                        <input type="radio" 
                            name="service" 
                            id="Development" 
                            value="Development" 
                            onClick={radioChange} 
                            checked={temp.service=="Development"?true:false}
                        />
                        <label for="Development" className="layanan">
                            <div className="icon-layanan" style={{backgroundImage:`url('img/Development.png')`}}></div>
                            <div className="nama-layanan">Development</div>
                        </label>
                        <input 
                            type="radio" 
                            name="service" 
                            id="Web Design" 
                            value="Web Design" 
                            onClick={radioChange} 
                            checked={temp.service=="Web Design"?true:false} 
                        />
                        <label for="Web Design" className="layanan">
                            <div className="icon-layanan" style={{backgroundImage:`url('img/WebDesign.png')`}}></div>
                            <div className="nama-layanan">Web Design</div>
                        </label>
                        <input 
                            type="radio" 
                            name="service" 
                            id="Marketing" 
                            value="Marketing" 
                            onClick={radioChange} 
                            checked={temp.service=="Marketing"?true:false} 
                        />
                        <label for="Marketing" className="layanan">
                            <div className="icon-layanan" style={{backgroundImage:`url('img/Marketing.png')`}}></div>
                            <div className="nama-layanan">Marketing</div>
                        </label>
                        <input 
                            type="radio" 
                            name="service" 
                            id="Other" 
                            value="Other" 
                            onClick={radioChange} 
                            checked={temp.service=="Other"?true:false} 
                        />
                        <label for="Other" className="layanan">
                            <div className="icon-layanan" style={{backgroundImage:`url('img/Other.png')`}}></div>
                            <div className="nama-layanan">Other</div>
                        </label>
                    </div>
                )
            }

            function PageContacts(x){
                const [contact, setContact] =React.useState({
                    name: temp.name,
                    email: temp.email,
                    phone: temp.phone,
                    company: temp.company
                });                 
                
                // function handleChange(e){
                //     const name = e.target.name;
                //     const value = e.target.value;
                //     setContact((prev) =>{
                //         return {...prev, [name]: value}
                //     })
                // }

                // function syncContact(){
                //     Object.assign(temp,contact);
                // }
                
                function eventChange(e){
                    const name = e.target.name;
                    const value = e.target.value;
                    setTemp((prev) =>{
                        return {...prev, [name]: value}
                    })
                }
                
                return(
                    <div className="box-content">
                        <div className={error.name?'item error':'item'}>
                            <label for="name" >Name</label>
                            <input 
                                type="text" 
                                name="name" 
                                id="name"  
                                placeholder="Name" 
                                value={contact.name}
                                ref={nameRef}
                                onChange={eventChange} 
                                // onBlur={syncContact}
                            />     
                            <div className="eror-msg">{error.name}</div>  
                        </div>
                        <div className={error.email?'item error':'item'}>
                            <label for="email">Email</label>
                            <input 
                                type="text" 
                                name="email" 
                                id="email" 
                                placeholder="Email" 
                                value={contact.email} 
                                ref={emailRef}
                                onChange={eventChange} 
                                // onBlur={syncContact} 
                            />     
                            <div className="eror-msg">{error.email}</div>     
                        </div>
                        <div className={error.phone?'item error':'item'}>
                            <label for="phone">Phone Number</label>
                            <input 
                                type="text" 
                                name="phone" 
                                id="phone" 
                                placeholder="Phone Number" 
                                value={contact.phone} 
                                ref={phoneRef}
                                onChange={eventChange} 
                                // onBlur={syncContact} 
                            />     
                            <div className="eror-msg">{error.phone}</div>     
                        </div>
                        <div className={error.company?'item error':'item'}>
                            <label for="company">Company</label>
                            <input 
                                type="text" 
                                name="company" 
                                id="company" 
                                placeholder="Company" 
                                value={contact.company} 
                                ref={companyRef}
                                onChange={eventChange} 
                                // onBlur={syncContact} 
                            />
                            <div className="eror-msg">{error.company}</div>     
                        </div>
                    </div>
                )
            }

            function BoxContent(x){
                if(x.page==1){return( <PageContacts />)}
                else if(x.page==2){return( <PageLayanan />)}
                else if(x.page==3){return <PageBudget />}
                else {return <PageSubmit />}
                
            }

            function Box(x){
                return(
                    <div className="box">
                        <Navbar page={x.page} />
                        <BoxTitle page={x.page} />
                        <BoxContent page={x.page} />
                    </div>
                )
            }

            function PageNav(p){
                return(
                    <div className="pagenav">
                        <button class={p.page>1?'prev':'prev hide'} onClick={prevButton}>Previous step</button>
                        <button class={p.page<4?'next':'next hide'} onClick={nextButton}>Next step</button>
                    </div>
                )
            }
            return (
                < >
                    <Header />
                    <Box page={page}/>
                    <PageNav page={page} />
                </>    
            )
        };

        ReactDOM.render(<App />,root)
    </script>
</body>
</html>