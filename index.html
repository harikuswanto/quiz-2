<!DOCTYPE html>
<head>
    <link href='https://fonts.googleapis.com/css?family=DM+Sans' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <title>Request Project Quote</title>
</head>
<body>
    <div id="root" class="container"></div>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" ></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" ></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" ></script>
    <script type="text/babel">
        const root = document.querySelector('#root');
        function App(){
            const [page, setPage] = React.useState(1);
            const [data, setData] =React.useState({
                name:'',
                email:'',
                phone:'',
                company:'',
                service:'',
                budget:''
            });
            
            const [temp, setTemp] =React.useState({
                name:'',
                email:'',
                phone:'',
                company:'',
                service:'',
                budget:''
            });

            const emailCheck =(e)=>{
                const pattern = /[a-z0-9\.]{6,30}\@gmail\.com$/
                return pattern.test(e);
            };
            
            const phoneCheck =(e)=>{
                const pattern = /08[0-9]{6,10}$/ 
                return pattern.test(e);
            };
            
            const saveData=(c)=>{
                isValidContact(c);
                Object.assign(data, c);
            }
            
            const nextButton=()=>{
                saveData(temp);
                page<4?setPage(page+1):'';
            }


            const prevButton=()=>{
                saveData(temp);
                page>0?setPage(page-1):'';
            }

            const error={status:false};
            const isValidContact=(e)=>{
                e.name==''?error.name='Name is required':'';
                e.email==''?error.email='Email is required':'';
                e.phone==''?error.phone='Phone Number is required':'';
                e.company==''?error.company='Company is required':'';
                emailCheck(e.email)?'':error.email = 'Email is invalid';
                emailCheck(e.phone)?'':error.phone = 'Phone Number is invalid';
                error.name||error.email||error.phone||error.company?error.status=true:error.status=false;
            }
            


            function Header(){
                return (
                    <header>
                        <h1>Get a project quote</h1>
                        <p>Please fill the form below to receive a quote for your project. Feel free to add as much detail as needed.</p>
                    </header>
                )
                
            }
            
            function Step(p){
                const [s,d] = ["step","step done"];
                return(
                    <div className={p.d?d:s}>{p.s}</div>
                )
            }
            
            function Bar(p){
                switch(p.k){
                    case '1':
                        return(<div className="bar"><div className="half"></div></div>);
                        break;
                    case '2':
                        return(<div class="bar done"></div>);
                        break;
                    default:
                        return(<div class="bar"></div>);
                    
                }
            }


            function Navbar(x){
                const p=x.page;
                return(
                    <nav>
                        <Step s="1" d />
                        <Bar k={p==1?'1':'2'}/>
                        <Step s="2" d={p<2?'':'1'} />
                        <Bar k={p<2?'':p==2?'1':'2'}/>
                        <Step s="3" d={p<3?'':'1'} />
                        <Bar k={p<3?'':p==3?'1':'2'}/>
                        <Step s="4" d={p<4?'':'1'} />
                    </nav>
                )
            }

            function BoxTitle(x){
                switch(x.page) {
                    case 1:
                        return(
                            <div className="box-title">
                                <h2>Contact details</h2>
                                <p>Lorem ipsum dolor sit amet consectetur adipisc.</p>
                            </div>
                        )
                        break;
                    case 2:
                        return(
                            <div className="box-title">
                                <h2>Our services</h2>
                                <p>Please select which service you are interested in.</p>
                            </div>
                        )
                        // code block
                        break;
                    case 3:
                        return(
                            <div className="box-title">
                                <h2>Whatâ€™s your project budget?</h2>
                                <p>Please select the project budget range you have in mind.</p>
                            </div>
                        )
                        // code block
                        break;
                    case 4:
                        return(
                            <div class="closing">
                                <h2>Submit your quote request</h2>
                                <p>Please review all the information you previously typed in the past steps, and if all is okay, submit your message to receive a project quote in 24 - 48 hours.</p>
                            </div>
                        )
                        break;
                    } 
            }

            
            // function TextInput(x){
            //     return(
            //         <div className="item">
            //             <label for={x.name}>{x.placeholder}</label>
            //             <input 
            //                 type="text" 
            //                 name={x.name} 
            //                 placeholder={x.placeholder} 
            //                 onChange={handleChange}
            //                 />     
            //             <div className="eror-msg">{x.eror}</div>     
            //         </div>
            //     )

            // }


            // function BoxContent(){
            //     return(
            //         <div className="box-content">
            //             <TextInput 
            //                 name="name"
            //                 placeholder="Name"
            //                 eror="Name is required"
            //             />
            //             <TextInput 
            //                 name="email"
            //                 placeholder="Email"
            //                 eror="Email is required"
            //             />
            //             <TextInput 
            //                 name="phone"
            //                 placeholder="Phone Number"
            //                 eror="Phone Number is invalid"
            //             />
            //             <TextInput 
            //                 name="company"
            //                 placeholder="Company"
            //                 eror="Company is required"
            //             />
            //         </div>
            //     )
            // }
            const BoxContent = (x) =>{
                const [contact, setContact] =React.useState({
                    name: data.name,
                    email: data.email,
                    phone: data.phone,
                    company: data.company
                });                 
                
                const handleChange = (e) =>{
                    const name = e.target.name;
                    const value = e.target.value;
                    setContact((prev) =>{
                        return {...prev, [name]: value}
                    })
                    
                }
                const syncContact=()=>{
                    Object.assign(temp, contact);
                }
                
                const eventChange = (e) =>{
                    handleChange(e);
                    syncContact();
                }
                

                return(
                    <div className="box-content">
                        <div class="item">
                            <label for="name">Name</label>
                            <input type="text" name="name" id="name"  placeholder="Name" value={contact.name} onChange={eventChange} />     
                            <div className="eror-msg">{error.name}</div>  
                        </div>
                        <div className="item">
                            <label for="email">Email</label>
                            <input type="text" name="email" id="email" placeholder="Email" value={contact.email} onChange={eventChange} />     
                            <div className="eror-msg">{error.email}</div>     
                        </div>
                        <div className="item">
                            <label for="phone">Phone Number</label>
                            <input type="text" name="phone" id="phone" placeholder="Phone Number" value={contact.phone} onChange={eventChange} />     
                            <div className="eror-msg">{error.phone}</div>     
                        </div>
                        <div className="item">
                            <label for="company">Company</label>
                            <input type="text" name="company" id="company" placeholder="Company" value={contact.company} onChange={eventChange} />
                            <div className="eror-msg">{error.company}</div>     
                        </div>
                    </div>
                )
            }


            
            function Box(x){
                return(
                    <div className="box">
                        <Navbar page={x.page} />
                        <BoxTitle page={x.page} />
                        <BoxContent />
                    </div>
                )
            }

            function PageNav(p){
                return(
                    <div className="pagenav">
                        <button class={p.page>1?'prev':'prev hide'} onClick={prevButton}>Previous step</button>
                        <button class="next" onClick={nextButton}>Next step</button>
                    </div>
                )
            }

            return (
                < >
                    <Header />
                    <Box page={page}/>
                    <PageNav page={page} />
                </>    
            )
        };

        ReactDOM.render(<App />,root)
    </script>
</body>
</html>